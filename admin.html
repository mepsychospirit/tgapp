<!DOCTYPE html>
<html lang="ru">
<head>
  <!-- (—Ç–æ—Ç –∂–µ head) -->
</head>
<body>
  <div class="container">
    <h1><i class="fas fa-shield-alt"></i> –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
    <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –∑–∞–∫–∞–∑–∞–º–∏</p>

    <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
    <div class="form">...</div>

    <div class="product-list" id="product-list">...</div>

    <!-- –ó–∞–∫–∞–∑—ã -->
    <div class="order-list" id="order-list" style="margin-top:32px; padding:16px; background:var(--card-bg); border-radius:12px;">
      <h2><i class="fas fa-receipt"></i> –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã</h2>
      <div id="orders">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>
  </div>

  <script>
    const tg = window.Telegram?.WebApp;
    if (!tg) {
      document.body.innerHTML = "<h2>üîí –¢–æ–ª—å–∫–æ –≤ Telegram</h2>";
      throw new Error("Not in Telegram");
    }
    tg.expand();

    const ADMIN_ID = 123456789; // ‚Üê –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –°–í–û–ô ID
    const user = tg.initDataUnsafe.user;
    if (!user || user.id !== ADMIN_ID) {
      tg.showAlert("‚ùå –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω!", () => tg.close());
    }

    // ... –∫–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞–º–∏ ...

    function loadOrders() {
      tg.CloudStorage.getItem('orders', (e, v) => {
        const orders = v ? JSON.parse(v).reverse().slice(0, 10) : [];
        const el = document.getElementById('orders');
        el.innerHTML = '';
        if (orders.length === 0) {
          el.innerHTML = '<p style="color:var(--text-secondary)">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</p>';
          return;
        }
        orders.forEach(o => {
          const div = document.createElement('div');
          div.style = "padding:12px; margin:8px 0; background:var(--bg); border-radius:8px; font-size:0.9rem;";
          const items = o.cart.map(i => `${i.name} √ó ${i.qty}`).join(', ');
          div.innerHTML = `<strong>${o.total} ‚≠ê</strong> –æ—Ç ${o.user.first_name}<br>üöö ${o.delivery}<br>üïí ${o.date}<br>üì¶ ${items}`;
          el.appendChild(div);
        });
      });
    }

    tg.ready();
    loadProducts();
    loadOrders();
  </script>
</body>
</html>
